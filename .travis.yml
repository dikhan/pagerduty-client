language: java

jdk:
  - oraclejdk8

dist: trusty

env:
  global:
  - # OSSRH_JIRA_USERNAME
  - secure: "cVP8mjrXOFI5QetZqLHVlwcoO5CycDhsImiWm1a0/XkZvPqeku+Ayk2gO0+jno3Zjv/EAoLvwHtthvt00jVilBWh9xj+0g+2cMU/6RzvhYXltusD1t6Oaj7ZU9EWEEupUHm8doaETSO9Dr4ZXs7n175e2r3nOMI95rhEbHgfkpDnQsVIn2IILxaV/sl9l3EynXqB9JWGzhF6XherDq0p9UuRarzHDfrWjD4q4RjpNO7lJ84Qgv2xu02VZPbOcjsMdrgbb1yqP9nKwtp3thDTdjBIYLAN0PcVefgwx1afyr23ujTeNZZBywPJ+tmdAgUvFrArLBKiS0YLjK6wFm/OTeZEdIkWNkyr+PhWS1gyNeq2xAobsEZnESaRjFiWxMQE0VmpmI4192PYrzh2VRTBEGhHTlq3VKqW7exo0YccCyzFPG1V1WbEEAZkZIw35/NDvnJVafzOFR9Chcf+Wn+iwjyL2Lj23AFSLMCsan600OQl3JRF6oIJ78iwziApJF/zX0VKrV9eO7XuBOODSKEn23UbMESq6/19BbfNmh3ZMe5LU6YqN1yYp2wwFbISl+aW8Sqgt34XJ/pZ/D9VbmcdlWtOfi3v9U/4ZRZDCdGu2r9O6/2pNLOEFFF/V675g1hLBB4KgMgJF7Mj/Wd8v5mMrcZsacDpGtwDp2crDGf49Yc="
  - # OSSRH_JIRA_PASSWORD
  - secure: "lo59ubGUUx8WsG4iWXuiez48YiMhk05XUTwYwLH0nxKIGbmbFEhfyIoSuMoHALZs45AHXBm/0HLTRumzz+zpkHFgyxmCkO3clttF24MnjtAcPZrIIhz9CO/fPiwGxa3o3OaTrrj3X5Cjd40XAW7vonU9gbRtWzqfoTAUYgUQzmnOgwkkRiczUexACWRQH5EUYgMSHO5JhGmWdErx3tqN0KTW7LJqh3kn9qr5Qferk1RinaAA4vZ2WoCaKuWfiHPCF6CSICHwknnm+hRzpUSt01kCDKMlY/BS55WrTnb+OpbJCDeEMHRVNUtPOznEAhfXgs60/5o4Xc4aIrXHvHjUNQJfInnQRthxC4JQFO+KMwWxSFJWRZxk4QsJGEV8Q9KW1lUWoBwEhP+1qYBHuHDmurmyKTxHn0chcDiLJ/YIVBl+PHXc0xv7ppKcIWBe2y/mZlcbszEtTXCinTZne2eLXkQSQBQUXhL7OR+oMRevdtPxwWInagEWyj9lizEoVI1wFRTgtsUmjpNj4t74XIcmcytFbIVh81C/3ka8tYfh72JzWFHxSmAbWPSN8ewRT3FeFbglaDU9Y8311MSKnI+Pol7fph4puIAtgxpbGi7LQEl3AkUn2Ant8z/9/wQ2WzM0ExYkSOmve3ybluKbfxTF8tcWA90o+VtwUi7gd+Co8wk="
  - # GPG_KEY_NAME
  - secure: "aKuGmOX6ASXM5gaZZ3+C7sh6558K8WwIbIh948zSbyChF99Vn5bObOUr7tqkSf5Ls0MqCT2txckXeZ/t3pOtP0jUqKxlUvlUlwZXjomfrEs22GHkUMZK5SW6Isnwmswt0lJG0YDJhSvhOTE4lqGibdLfsAut1r93qr9kzDZKV7ixP4SbGqGcLSssXrRSnZchC8hl2yXDa88k31ss2PoqDXYuso9U304bwnaswYdeol1JObWj60CUvylQl1Lys94t8OYjnTwXuadDcxbA53OrHt8KWOvcGB+ea70KNw3iWXkEsRuYKUNvMn/UHigQiakSLPlWlt0BEMFNWi5qo7sP9VY46z2JWrGgvoA6qcr5MsEwwrK4flhaE6Nq8AwIE9iTu+kqE7UN2rCTUFMj7zSi7s0+uyoqSpmGWVePBmXAN91rx1FeLzVXoSM8N+w5rbq/1t9OqGjSVKewKnjmpQf75f2GnHFPfzAbjXUqmzF0g8sr0CjLdFZ3kt8UDGT0vX2+eRkLUqkoEv9Bs0VbdEGZygv/D2FkLQjYcTJiakIA6eH2a9hpAj2or4vu+0UwfRRNCqD1NJdpXaCPyyP3vSpwJu4Aswz00Tdyx5GAL9NXBj7NZR5JSBneEBlBf4FKdIjyGi6i0Uh4VPPOtSq2nAWd8/bZxljD+rYJGFuZt6RZiQw="
  - # GPG_PASSPHRASE
  - secure: "XXnVLn1CZM2MeJ6C9t1YBfKDeJFMaEAtCBaVCJo05pp1TT+TRVLwGmDNAVSNcdKAbkS6sH49M6X/5G2PupvC7XURUXn/NjXwIKOrbiLMhWVy/MdCkh/RWK8gTNAMiaSPC+CWewvAUzaxmWmTM+RSQtRCFA+Q45GeBxXrg5fYrbQcPYUjK0RGtAOKFQB6itq+GWerBjk4nh6uCbA+WCKGvUrx2Y7CTvaZPVrS6QkUU2xM7S3PBqLOccVQyTJKnjRAQEDtsJP6FPRkdK52I1eZJQd+I/J6XchSQBVEI+6KXYlYf+m1lgqk/qhtXZoX00oAraaNGoQbWreybLwnih95mvj36AjGtjyWbOn6uxWz10jDfeqZfi0QAfzRHMeNsB/ktUkfBxrrdv9B4T2R74JfyPiIuKDfqc9AkPTe/6MojyHSeWuwIWZnxT+QLx1vzArV/QizQaxlqkzAeuJo+Fg77GEE0JueVimUXrFAyQu5+ugsJWsNNPTxh47e65HF5wjYtF+slwtOLjYqzG/B7kd8G/Rp2Kbk7JVEZoKIXZ05DloUkX190k32KSKA8wFvdDDwBMzUTZHP6XEG4piQOgGwfosWSQoN2wkkFDWE3Z7PaHJ7YT0JoAoD/8Q+y5pIWvca+J5tzueK5ipLmFixRe6b8VCDCbHFQwT0yr0AkfxypUw="
  - # GITHUB_EMAIL
  - secure: "q3eFJHAWB0XC7ZcTZrZ3B8QmFJ+nQEQOzVlkq4ya917YORB3V237L2S7CUmUqU1zDueSRpDPuykq+5XggdqPUTtblavm/YAJ1vgD061vYz93vuFwOz60ZZabpoNvGjZSDOB/55lxgldXS7SUHyPwGwEBv6cMvFkHHkbN2jX3ssLsZrIt3YdF2C5vppCbQ2VS0X/dl1HHDf5ToUV6fdH7kIzfzTYvjYkdEsmUTVyQKG1shvVMXZlZCb7oQsrvfbklJO8USeA+cVz0otcRs0AKoJG1cMNfsUMJTe1SGzWbJJpmm7Oxo7VkHJE0Yo/MsssmDqncu6aSQGI7epIzlCTJkZcpkHmYIRUG+UtOM9bThHx4BaSDlMhrBjCfLvEFHWL1bVeqyXYDPJzTkFQsSYKHWJosGUDWFlbJBwE6eik8qRtR0gjmwCXOfpTqfB4p7X62yy2eX8sv29BKcaIgTr3CDFe58bN+A7TyPjYaij5QhHkCTx21dWjbsbmAiDbT5DU1mx8NNU+bYz08F7cusX/DKa2phMdINHIKp0OvIrfgpYxcBA9OQEo32HKjN1gzLoT7Cj9nHS8+CCKptEWABskTFMHh+RSgOT1RsvqxphtcPo9bU8gXz7u8ddy7Yb8Eee0PFlSqA58SP76AvcDB8yoRQUzdUYpIxbPQ1gbA/rzA4LU="
  - # GITHUB_USERNAME
  - secure: "pVPUaW6hkNhAQn3xJsBKneuvOYF3Ey6SZTkg6iNhELMO+TBAYz6qH//PQoaTM4buuOA5gb7RgQg2Gf5ZDdzEwfHW1KQGM5VJytjKKzeZj86jGMLelhatL+ERdTd2a18jnV36jbmLw7ESxJTzTTrFNYTM75by3/T1xUTGvF0BI/bkl9/NLsZm2IPBTZpghx3YnQOZj58leLsLCAf9L8glqBw6nTd98KkHWtfDNteDrJSturfIpr2SUkcsdt4JW3flo1b0m08YlysX2ZAFh1gNaqhnVynwQ0ABa++iilMbWD67nTzrE4Yl7WMkcFq9crfZxX2ltoNm94n7MgqCBwJlnP+OePeTMoSphyTOVkhe9gRu8P8NqnM2sa2bSjz0zBNqtv8fFN1xj8ab43LAvFWz0gib/HBRAkfSzjpQGR8pN10ld8f6cwZv0sPxFGV3wrFIsXwnk7gNUI/+T9o2vFKWocgXD0WSCNnaQEQzXu5NWj8za7xyR6zkvbzqItT+bcX3Jk38nNzfL8FDZeXgcb0rfcNUveZPLfuvI0pmXta6QLIr6Ge74qn686bc3jGwrOxWNSB8Khn+oCeltKHmZ2q+aEn3wmjCjaZz459qcROjGhuZ//H/4Z4N3Vh0eqN2GMtU5feDJEPdmQRpEhrjMvj+KJEV6Y17c0m/xvvHmPOZRes="
  - # PEM_ENCRYPTION_PASSWORD
  - secure: "fJOACH7u3KIN+ADdbXbyaucFePAH1S+G0/CZEN6GYBNyGgaspJFBk+JPyuBzSqdA6/Y5i1mFkT2tOVYZVJnYEXCuwpJwcmjXLhgze/Ie8QPHo3Io26TlBFvPoQ4yT3Y7yiIXb5diDz4dm+p9ELwZaX9ctZmKOrtF85/KPWzMTRvTrnk5fwJS5qcK+IY2xIEGGBWqgDR1Tdkzye8hv0E/h4vZEuDsV18dEMJWpOCGxHUwV3OH9tS7OXgqBgJvNCixQ3547U8/dGfKmMYPPkddCdWsBHm1FhI5Tslde1RD/0rQ6uhcCk6vXahVEQaTonNEhtt3kVCaT9x76YRONTMqdXIY13bSbvyFAfMDt0cNsd6NkCY3dg8uoXwPDDR1u5A4hu7yJltxhokR5ovU6ooscgyJVRDzmHsiNT4whvjoZv76GX3O2uxD2rpZB/4ccrt4xT8EXN3bu+yoQPWPThDUoaDpCc1a6M5Rhjy08rrWLHbtcuYv5mFL2PYAZbUiw2sk5fuT5XSthv6bO3pXyZY5Lx8+w7kHLA9c4HWUpxS5YKDm5mA4mxEBhPjKDRrQ/daxkjXiDE0IgqknICDWfeaZ/3B6EfGBz0xDwjliGTwhZRX1brX3N8TnoD33RS2fI+rwO+XY7knM4eweNQBoMxVUnW2QfRiO7r0YLJJIwjAaQPo="

# safelist
branches:
  only:
  - master

install:
  - mvn install -P !build-extras -DskipTests=true -Dmaven.javadoc.skip=true -B -V
  - export TRAVIS_COMMIT_DESCRIPTION=`git log -n 1`

script:
  # The below should be placed in the after_success stage but due to the nature on how travis deals with after_script
  # exit codes different than 0 would not affect the build result which is not the expectation in this case.
  - mvn test -P !build-extras -B  || travis_terminate 1;
  - chmod +x ./travis-ci/before-deploy.sh ./travis-ci/deploy.sh ./travis-ci/cleanup.sh || travis_terminate 1;
  - ./travis-ci/before-deploy.sh;
  - ./travis-ci/deploy.sh;
  - ./travis-ci/cleanup.sh;

cache:
  directories:
    - ~/.m2/repository